#!/usr/bin/env bash

FILENAME=""
if [[ -n "$1" ]]; then
  FILENAME="$1.lua"
  if [[ ! -r "${FILENAME}" ]]; then
    echo "${FILENAME}: file not found"
  fi
fi

docker run \
  --interactive \
  --tty \
  --rm \
  --name aoc-lua \
  --mount type=bind,src=$(pwd),dst=/aoc \
  --mount type=bind,src=$(pwd)/lang/lua/.luarocks,dst=/home/aoc/.luarocks \
  ghcr.io/craigcottingham/aoc/aoc-lua:latest \
  ${FILENAME}